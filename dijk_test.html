<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Dijkstra</title>
		<script src="js/graph.js"></script>
	</head>
	<body>
		<script>
			var road = makeStruct("u v distance");
			var point = makeStruct("x y");
			var point1 = new point(1, 1);
			var point2 = new point(2, 4);
			var point3 = new point(3, 3);
			var point_map = {};
			point_map['1'] = point1;
			point_map['2'] = point2;
			point_map['3'] = point3;
			var road1 = new road(1, 2, 30);
			var road2 = new road(1, 3, 10);
			var road3 = new road(2, 3, 10);
			var road_arr = new Array();
			road_arr[0] = road1;
			road_arr[1] = road2;
			road_arr[2] = road3;
			var map = {'1':{'2':0,'3':1},'2':{'1':0,'3':2},'3':{'1':1,'2':2}},
			    graph = new Graph(map, road_arr);
			var path = graph.findShortestPath('1', '2');
			console.log(path);
			console.log(map['1']['2']);
			var pos_arr = new Array();
			var idx = 1, pos_idx = 0;
			var tmp_point = point_map[path[0]], nxt_point = point_map[path[idx]];
			var velocity = 0.5;
			while(idx < path.length)
			{
				pos_arr[pos_idx] = tmp_point;
				pos_idx += 1;
				var dx = nxt_point.x-tmp_point.x;
				var dy = nxt_point.y-tmp_point.y;
				var distance = Math.sqrt(dx*dx+dy*dy);
				if(distance<velocity)
				{
					tmp_point = nxt_point;
					idx++;
					if(idx < path.length)
						nxt_point = point_map[path[idx]];
				}
				else
				{
					dx = dx/distance;
					dy = dy/distance;
					var new_x = tmp_point.x+dx*velocity;
					var new_y = tmp_point.y+dy*velocity;
					tmp_point = new point(new_x, new_y);
				}
			}
			pos_arr[pos_idx] = tmp_point;
			console.log(pos_arr);
		</script>
	</body>
</html>





































